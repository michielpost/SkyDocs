<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>SkyDocs</title>

    <script>
        // set base href dynamically based on hosting location
        var base = document.createElement("base");
        var newBase = `${window.location.pathname}`;

        var secondSlash = newBase.indexOf("/", 1);
        newBase = newBase.substr(0, secondSlash);

        // Ensure initial slash present
        newBase = (newBase.startsWith("/") ? "" : "/") + newBase;
        // Ensure trailing slash present
        newBase += newBase.endsWith("/") ? "" : "/";
        base.href = newBase;
        console.log(`Base href set to ${newBase}`);
        document.getElementsByTagName("head")[0].appendChild(base);
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600&display=swap"
          rel="stylesheet" />

    <link rel="stylesheet" href="_content/Radzen.Blazor/css/default.css" />

    <link href="css/app.css" rel="stylesheet" />
    <link href="SkyDocs.Blazor.styles.css" rel="stylesheet" />
    <link href="favicon.ico" rel="icon" type="image/x-icon" />
    <script defer src="index.js"></script>
    <link rel="apple-touch-icon"
          sizes="180x180"
          href="/apple-touch-icon.png" />
    <link rel="icon"
          type="image/png"
          sizes="32x32"
          href="/favicon-32x32.png" />
    <link rel="icon"
          type="image/png"
          sizes="16x16"
          href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5" />
    <meta name="msapplication-TileColor" content="#da532c" />
    <meta name="theme-color" content="#ffffff" />

</head>

<body>
    <div id="app">
        <div class="loader">
            <img src="img/loader.png" alt="Loading SkyDocs" />
            <p>Loading SkyDocs...</p>
        </div>
    </div>

    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="" class="reload">Reload</a>
        <a class="dismiss">ðŸ—™</a>
    </div>
    <script src="js/html2canvas.min.js"></script>
    <script src="js/interop.js"></script>
    <script src="_content/Radzen.Blazor/Radzen.Blazor.js"></script>
    <script src="decode.min.js"></script>
    <script src="_framework/blazor.webassembly.js"
            autostart="false"></script>
    <script>
        Blazor.start({
            loadBootResource: function (type, name, defaultUri, integrity) {
                if (
                    type !== "dotnetjs" &&
                    location.hostname !== "localhost"
                ) {
                    return (async function () {
                        const response = await fetch(defaultUri + ".br", {
                            cache: "no-cache",
                        });
                        if (!response.ok) {
                            throw new Error(response.statusText);
                        }
                        const originalResponseBuffer =
                            await response.arrayBuffer();
                        const originalResponseArray = new Int8Array(
                            originalResponseBuffer
                        );
                        const decompressedResponseArray = BrotliDecode(
                            originalResponseArray
                        );
                        const contentType =
                            type === "dotnetwasm"
                                ? "application/wasm"
                                : "application/octet-stream";
                        return new Response(decompressedResponseArray, {
                            headers: { "content-type": contentType },
                        });
                    })();
                }
            },
        });
    </script>
</body>
</html>
